"use strict";document.addEventListener("DOMContentLoaded",(function(){((e,t,r)=>{const a=document.querySelector(e),n=document.querySelector(t),c=document.querySelector(r);a.addEventListener("click",e=>{a.classList.toggle("hamburger--active"),n.classList.toggle("header__nav--active"),c.classList.toggle("header--menu")})})(".hamburger",".header__nav",".header");(e=>{const t=document.querySelectorAll(e);if(t){t.forEach(e=>{const t=e.id;document.querySelectorAll("."+t).forEach(t=>{let r=e.querySelector(".close");t&&t.addEventListener("click",t=>{t.target&&t.preventDefault(),e.classList.add("active")}),r&&r.addEventListener("click",()=>{e.classList.remove("active")}),e.addEventListener("click",t=>{t.target===e&&e.classList.remove("active")})})})}})(".modal");(e=>{const t=document.querySelectorAll(e);let r=1,a=1,n=1,c=1;t.forEach(e=>{const t="form--"+r++;e.classList.add(t);let l=e.id=t,o=document.querySelector("#"+l);o.addEventListener("submit",(async function(t){t.preventDefault();let r=function(e){let t=0,r=o.querySelectorAll("._req");for(let e=0;e<r.length;e++){const a=r[e];a.classList.contains("_email")?m(a)&&(i(a),t++):"checkbox"===a.getAttribute("type")&&!1===a.checked?(d(a),t++):""===a.value&&(s(a),t++)}return t}(),a=new FormData(e);if(0===r){if(e.classList.add("_sending"),(await fetch("sendmail.php",{method:"POST",body:a})).ok){let t=document.querySelector("#modal__thanks");o.parentNode.style.display="none",t.classList.add("active"),e.reset(),e.classList.remove("_sending")}else alert("Ошибка при отправке"),e.classList.remove("_sending")}}));function s(e){let t=document.createElement("div");t.classList.add("form__error"),t.innerHTML="Введите данные в поле",e.parentElement.append(t),e.parentElement.classList.add("_error"),e.classList.add("_error")}function i(e){let t=document.createElement("div");t.classList.add("form__error"),t.innerHTML="Введите свою почту",e.parentElement.append(t),e.parentElement.classList.add("_error"),e.classList.add("_error")}function d(e){let t=document.createElement("div");t.classList.add("form__error"),t.innerHTML="Согласие на обработку персональных данных",e.parentElement.append(t),e.parentElement.classList.add("_error"),e.classList.add("_error")}function m(e){return!/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(e.value)}o.querySelectorAll(".formImgFile").forEach(e=>{const t="formImgFile--"+r++;let l=e.id=t,o=document.querySelector("#"+l);const s=o.querySelector(".formImage"),i=o.querySelector(".formLebel"),d=o.querySelector(".formPreview");let m="formImage--"+a++,u="formPreview--"+c++;s.id=m,i.htmlFor="formImage--"+n++,d.id=u;document.querySelector("#"+m).addEventListener("change",()=>{!function(e){if(!["image/jpeg","image/png","image/gif","image/ico","application/pdf"].includes(e.type))return alert("Только изображения"),void(s.value="");if(e.size>2097152)return void alert("Размер менее 2 мб.");var t=new FileReader;t.onload=function(t){["application/pdf"].includes(e.type)?d.innerHTML="Файл выбран":d.innerHTML=`<img src="${t.target.result}" alt="Фото">`},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}(s.files[0])})})})})(".form")}));