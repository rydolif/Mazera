"use strict";document.addEventListener("DOMContentLoaded",(function(){var e;e=".accordion",document.querySelectorAll(e).forEach(e=>{const t=e.querySelector(".accordion__header"),r=e.querySelector(".accordion__content");t.addEventListener("click",t=>{if(e.classList.contains("accordion--active"))r.style.height="0px",e.classList.remove("accordion--active");else{e.classList.add("accordion--active"),r.style.height="auto";var a=r.clientHeight+"px";r.style.height="0px",setTimeout(()=>{r.style.height=a},0)}})});((e,t)=>{const r=document.querySelectorAll(e),a=document.querySelector(t);r.forEach(e=>{e.addEventListener("click",e=>{a.classList.toggle("header__nav--active")})})})(".hamburger",".menu");(e=>{const t=document.querySelectorAll(e);if(t){t.forEach(e=>{const t=e.id;document.querySelectorAll("."+t).forEach(t=>{let r=e.querySelector(".close");t&&t.addEventListener("click",t=>{t.target&&t.preventDefault(),e.classList.add("active")}),r&&r.addEventListener("click",()=>{e.classList.remove("active")}),e.addEventListener("click",t=>{t.target===e&&e.classList.remove("active")})})})}})(".modal");(e=>{const t=document.querySelectorAll(e);let r=1,a=1,n=1,c=1;t.forEach(e=>{const t="form--"+r++;e.classList.add(t);let o=e.id=t,i=document.querySelector("#"+o);i.addEventListener("submit",(async function(t){t.preventDefault();let r=function(e){let t=0,r=i.querySelectorAll("._req");for(let e=0;e<r.length;e++){const a=r[e];a.classList.contains("_email")?m(a)&&(s(a),t++):"checkbox"===a.getAttribute("type")&&!1===a.checked?(d(a),t++):""===a.value&&(l(a),t++)}return t}(),a=new FormData(e);if(0===r){if(e.classList.add("_sending"),(await fetch("sendmail.php",{method:"POST",body:a})).ok){let t=document.querySelector("#modal__thanks");i.parentNode.style.display="none",t.classList.add("active"),e.reset(),e.classList.remove("_sending")}else alert("Ошибка при отправке"),e.classList.remove("_sending")}}));function l(e){let t=document.createElement("div");t.classList.add("form__error"),t.innerHTML="Введите данные в поле",e.parentElement.append(t),e.parentElement.classList.add("_error"),e.classList.add("_error")}function s(e){let t=document.createElement("div");t.classList.add("form__error"),t.innerHTML="Введите свою почту",e.parentElement.append(t),e.parentElement.classList.add("_error"),e.classList.add("_error")}function d(e){let t=document.createElement("div");t.classList.add("form__error"),t.innerHTML="Согласие на обработку персональных данных",e.parentElement.append(t),e.parentElement.classList.add("_error"),e.classList.add("_error")}function m(e){return!/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(e.value)}i.querySelectorAll(".formImgFile").forEach(e=>{const t="formImgFile--"+r++;let o=e.id=t,i=document.querySelector("#"+o);const l=i.querySelector(".formImage"),s=i.querySelector(".formLebel"),d=i.querySelector(".formPreview");let m="formImage--"+a++,u="formPreview--"+c++;l.id=m,s.htmlFor="formImage--"+n++,d.id=u;document.querySelector("#"+m).addEventListener("change",()=>{!function(e){if(!["image/jpeg","image/png","image/gif","image/ico","application/pdf"].includes(e.type))return alert("Только изображения"),void(l.value="");if(e.size>2097152)return void alert("Размер менее 2 мб.");var t=new FileReader;t.onload=function(t){["application/pdf"].includes(e.type)?d.innerHTML="Файл выбран":d.innerHTML=`<img src="${t.target.result}" alt="Фото">`},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}(l.files[0])})})})})(".form")}));